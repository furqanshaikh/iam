"use strict";(self.webpackChunkiam=self.webpackChunkiam||[]).push([[1230],{3292:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(4848),i=n(8453);const r={},o="Delta Aggregation - Web Service Connector",s={id:"basics/iiq-ws-delta-agg",title:"Delta Aggregation - Web Service Connector",description:"Delta aggregation plays a vital role in optimizing identity management processes by ensuring that only the changes (deltas) since the last aggregation are retrieved, reducing time and resource consumption. In SailPoint IdentityIQ, this feature allows efficient synchronization with external systems by only fetching modified or new records instead of performing a full account aggregation each time.",source:"@site/docs/basics/iiq-ws-delta-agg.md",sourceDirName:"basics",slug:"/basics/iiq-ws-delta-agg",permalink:"/iam/docs/basics/iiq-ws-delta-agg",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Three-Level Approval Workflow",permalink:"/iam/docs/basics/iiq-three-levels-approver-worklow"},next:{title:"IAM - Extras",permalink:"/iam/docs/category/iam---extras"}},l={},c=[{value:"Does SailPoint Web Service Connector Support Delta Aggregation?",id:"does-sailpoint-web-service-connector-support-delta-aggregation",level:3},{value:"Implementing Delta Aggregation with Web Service Connector",id:"implementing-delta-aggregation-with-web-service-connector",level:3},{value:"1. <strong>WebServiceBeforeOperation Rule</strong>",id:"1-webservicebeforeoperation-rule",level:4},{value:"2. <strong>Standard and Delta Aggregation Tasks</strong>",id:"2-standard-and-delta-aggregation-tasks",level:4},{value:"3. <strong>Automating Task Execution</strong>",id:"3-automating-task-execution",level:4},{value:"Example Configuration",id:"example-configuration",level:3},{value:"BeanShell Rule for Delta Aggregation:",id:"beanshell-rule-for-delta-aggregation",level:4},{value:"Dealing with Last Aggregation Timestamp",id:"dealing-with-last-aggregation-timestamp",level:3},{value:"Conclusion",id:"conclusion",level:3}];function g(e){const t={code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"delta-aggregation---web-service-connector",children:"Delta Aggregation - Web Service Connector"})}),"\n",(0,a.jsx)(t.p,{children:"Delta aggregation plays a vital role in optimizing identity management processes by ensuring that only the changes (deltas) since the last aggregation are retrieved, reducing time and resource consumption. In SailPoint IdentityIQ, this feature allows efficient synchronization with external systems by only fetching modified or new records instead of performing a full account aggregation each time."}),"\n",(0,a.jsx)(t.h3,{id:"does-sailpoint-web-service-connector-support-delta-aggregation",children:"Does SailPoint Web Service Connector Support Delta Aggregation?"}),"\n",(0,a.jsx)(t.p,{children:"The Web Service connector, as it stands out-of-the-box, does not natively support delta aggregation. However, through custom configurations and clever rule manipulation, it is possible to enable delta aggregation for Web Service-based integrations."}),"\n",(0,a.jsx)(t.h3,{id:"implementing-delta-aggregation-with-web-service-connector",children:"Implementing Delta Aggregation with Web Service Connector"}),"\n",(0,a.jsx)(t.p,{children:"To implement delta aggregation in a Web Service connector within SailPoint, you can follow a custom approach that involves using rules and tasks to modify the connector behavior dynamically. Here's an outline of how it can be done:"}),"\n",(0,a.jsxs)(t.h4,{id:"1-webservicebeforeoperation-rule",children:["1. ",(0,a.jsx)(t.strong,{children:"WebServiceBeforeOperation Rule"})]}),"\n",(0,a.jsxs)(t.p,{children:["One method for implementing delta aggregation is by using a ",(0,a.jsx)(t.code,{children:"WebServiceBeforeOperation"})," rule. This rule checks the primary account aggregation task and looks for a delta aggregation attribute. If delta aggregation is enabled, the rule manipulates the web service call's ",(0,a.jsx)(t.code,{children:"ContextURI"})," or body payload to include a timestamp. This timestamp represents the last successful aggregation date, retrieved from the application configuration. The web service then returns only the changes since that date."]}),"\n",(0,a.jsxs)(t.h4,{id:"2-standard-and-delta-aggregation-tasks",children:["2. ",(0,a.jsx)(t.strong,{children:"Standard and Delta Aggregation Tasks"})]}),"\n",(0,a.jsx)(t.p,{children:"You will need two separate tasks:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Full Account Aggregation Task"}),": This is the standard task that aggregates all accounts."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Delta Account Aggregation Task"}),": This task runs more frequently and aggregates only the changes since the last aggregation."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Both tasks can be part of a sequential workflow that toggles between full and delta aggregations as needed."}),"\n",(0,a.jsxs)(t.h4,{id:"3-automating-task-execution",children:["3. ",(0,a.jsx)(t.strong,{children:"Automating Task Execution"})]}),"\n",(0,a.jsx)(t.p,{children:"You can schedule the delta aggregation task to run on an hourly basis, while the full aggregation task could be scheduled less frequently (e.g., weekly). The delta task will focus on identifying newly added or modified accounts, whereas the full task ensures that deleted accounts or any missed changes are captured."}),"\n",(0,a.jsx)(t.p,{children:"In this scenario:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Delta Task"}),": Runs a rule to set ",(0,a.jsx)(t.code,{children:"deltaAggregation = true"})," and ",(0,a.jsx)(t.code,{children:"checkDeleted = false"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Full Task"}),": Resets ",(0,a.jsx)(t.code,{children:"deltaAggregation = false"})," and ",(0,a.jsx)(t.code,{children:"checkDeleted = true"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"By doing this, you ensure that delta aggregation picks up incremental changes, while full aggregation takes care of the rest, including cleanup of deleted accounts."}),"\n",(0,a.jsx)(t.h3,{id:"example-configuration",children:"Example Configuration"}),"\n",(0,a.jsx)(t.h4,{id:"beanshell-rule-for-delta-aggregation",children:"BeanShell Rule for Delta Aggregation:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'if (deltaAggregationEnabled) {\r\n    task.setAttribute("deltaAggregation", true);\r\n    task.setAttribute("checkDeleted", false);\r\n} else {\r\n    task.setAttribute("deltaAggregation", false);\r\n    task.setAttribute("checkDeleted", true);\r\n}\n'})}),"\n",(0,a.jsx)(t.p,{children:"This rule dynamically sets the attributes for each task to determine whether a full or delta aggregation should be performed."}),"\n",(0,a.jsx)(t.h3,{id:"dealing-with-last-aggregation-timestamp",children:"Dealing with Last Aggregation Timestamp"}),"\n",(0,a.jsx)(t.p,{children:"For delta aggregation to work effectively, you need to keep track of the last successful aggregation timestamp. This timestamp can either be stored in the application configuration or in a custom table in the IdentityIQ database."}),"\n",(0,a.jsx)(t.p,{children:"Here are two possible methods to retrieve the timestamp:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Application Configuration"}),": Store the timestamp of the last successful aggregation within the configuration of the connected application and retrieve it during the WebServiceBeforeOperation rule."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Custom Database Table"}),": Create a custom table in IdentityIQ to store metadata such as the last aggregation timestamp. You can then fetch this timestamp inside the rule and use it to perform the delta aggregation."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,a.jsx)(t.p,{children:"While the Web Service connector in SailPoint IdentityIQ does not inherently support delta aggregation, with custom configurations and rules, you can enable delta aggregation efficiently. This setup can reduce the overhead of full account aggregations and ensure that only the most recent changes are aggregated, making identity management more responsive and scalable."}),"\n",(0,a.jsx)(t.p,{children:"By scheduling delta aggregation tasks and maintaining full aggregations for cleanup, you can strike a balance between performance and completeness in your integration processes."})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var a=n(6540);const i={},r=a.createContext(i);function o(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);